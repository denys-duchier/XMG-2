%token sem
%token id

%type SemStmts SemStmts
%type SemStmt SemStmt
%type Pred Pred
%type ScopeOver ScopeOver
%type Var Var

%%


SemStmts : SemStmt {$$=$1} 
	 | SemStmt ';' SemStmts {$$=sem:and($1,$3)} 
	 | SemStmt '|' SemStmts {$$=sem:or($1,$3)}
	 | '{' SemStmts '}'     {$$=$2};

SemStmt : Pred {$$=$1} 
	| ScopeOver {$$=$1};
 
Pred : Var ':' id '(' (Var // ',')+ ')' {$$=sem:pred($1,$3,$5)} 
     | id '(' (Var // ',')+ ')'  {$$=sem:pred(none,$1,$3)};

ScopeOver : Var '<<' Var {$$=sem:scopeOver($1,$3)};

Var : id {$$=$1}
    | '?' id {$$=$2}
    | '!' id {$$=$2};

%%
